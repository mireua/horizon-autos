{% extends 'base.html.twig' %}

{% block title %}Book Car Service{% endblock %}

{% block stylesheets %}
    <style>
        /* CSS to disable pointer events during hover */
        .disable-hover:hover {
            pointer-events: none;
        }
    </style>
    <link rel="stylesheet" href="{{ asset('styles/vehindex.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
{% endblock %}

{% block body %}
<div class="card mb-3 disable-hover">
    <div class="card-body">
        {% if app.user %}
            <h5 class="card-title">Service Your Car</h5>
            <form id="testDriveForm">
                <div class="mb-3">
                    <select class="form-control" name="car" required>
                        <option value="">Select Car</option>
                        {% for sale in sales %}
                            <option value="{{ sale.car.id }}">{{ sale.car.make }} {{ sale.car.model }} ({{ sale.car.year }})</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="mb-3">
                    <input type="text" class="form-control" name="name" placeholder="Your Name" required value="{{ app.user.name }}" readonly>
                </div>
                <div class="mb-3">
                    <input type="email" class="form-control" name="email" placeholder="Your Email" required value="{{ app.user.email }}">
                </div>
                <div class="mb-3">
                    <input type="tel" class="form-control" name="phone" placeholder="Your Phone Number" required>
                </div>
                <div class="mb-3">
                    <label for="testDriveDate">Choose a Date:</label>
                    <input type="date" class="form-control" id="testDriveDate" name="scheduledTime" required>
                </div>
                <button type="button" onclick="submitTestDriveForm()" class="btn btn-primary">Book Now</button>
            </form>
        {% else %}
            <p class="card-text">Please <a href="{{ path('app_login') }}">log in</a> to book a car service.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
